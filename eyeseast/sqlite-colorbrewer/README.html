<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">sqlite-colorbrewer</h1><a id="user-content-sqlite-colorbrewer" class="anchor" aria-label="Permalink: sqlite-colorbrewer" href="#sqlite-colorbrewer"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><a href="https://pypi.org/project/sqlite-colorbrewer/" rel="nofollow"><img src="https://img.shields.io/pypi/v/sqlite-colorbrewer.svg" alt="PyPI" style="max-width: 100%;" data-camo-src="https://camo.githubusercontent.com/75180155998cf9ef1e36644c39a42288e3c57d9dccdf04d4784a657e39a21250/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f73716c6974652d636f6c6f726272657765722e737667"></a>
<a href="https://github.com/eyeseast/sqlite-colorbrewer/releases"><img src="https://img.shields.io/github/v/release/eyeseast/sqlite-colorbrewer?include_prereleases&label=changelog" alt="Changelog" style="max-width: 100%;" data-camo-src="https://camo.githubusercontent.com/1891e841f0fc1225ec184ca92abee2a1baa11651b7eff841beff359036fbcdd2/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f762f72656c656173652f65796573656173742f73716c6974652d636f6c6f726272657765723f696e636c7564655f70726572656c6561736573266c6162656c3d6368616e67656c6f67"></a>
<a href="https://github.com/eyeseast/sqlite-colorbrewer/actions?query=workflow%3ATest"><img src="https://github.com/eyeseast/sqlite-colorbrewer/workflows/Test/badge.svg" alt="Tests" style="max-width: 100%;"></a>
<a href="https://github.com/eyeseast/sqlite-colorbrewer/blob/main/LICENSE"><img src="https://img.shields.io/badge/license-Apache%202.0-blue.svg" alt="License" style="max-width: 100%;" data-camo-src="https://camo.githubusercontent.com/c355f200ea90fddaa407b6eaab303663a669248ea3ca7b1fcf77dbe04ff5f48c/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6c6963656e73652d417061636865253230322e302d626c75652e737667"></a></p>
<p dir="auto">A custom function to use <a href="https://colorbrewer2.org/" rel="nofollow">ColorBrewer</a> scales in SQLite queries.</p>
<p dir="auto">Colors are exported from <a href="https://colorbrewer2.org/export/colorbrewer.json" rel="nofollow">here</a>.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Installation</h2><a id="user-content-installation" class="anchor" aria-label="Permalink: Installation" href="#installation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">To install as a Python library and use with the <a href="https://docs.python.org/3/library/sqlite3.html" rel="nofollow">standard SQLite3 module</a>:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="pip install sqlite-colorbrewer"><pre class="notranslate"><code>pip install sqlite-colorbrewer
</code></pre></div>
<p dir="auto">To install this plugin in the same environment as Datasette.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="datasette install sqlite-colorbrewer"><pre class="notranslate"><code>datasette install sqlite-colorbrewer
</code></pre></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Usage</h2><a id="user-content-usage" class="anchor" aria-label="Permalink: Usage" href="#usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">If you're using this library with Datasette, it will be automatically registered as a plugin and available for use in SQL queries, like so:</p>
<div class="highlight highlight-source-sql notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="SELECT colorbrewer('Blues', 9, 0);"><pre><span class="pl-k">SELECT</span> colorbrewer(<span class="pl-s"><span class="pl-pds">'</span>Blues<span class="pl-pds">'</span></span>, <span class="pl-c1">9</span>, <span class="pl-c1">0</span>);</pre></div>
<p dir="auto">That will return a single value: <code>"rgb(247,251,255)"</code></p>
<p dir="auto">To use with a SQLite connection outside of Datasette, use the <code>register</code> function:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content=">>> import sqlite3
>>> import sqlite_colorbrewer

>>> conn = sqlite3.connect(':memory')
>>> sqlite_colorbrewer.register(conn)

>>> cursor = conn.execute("SELECT colorbrewer('Blues', 9, 0);")
>>> result = next(cursor)
>>> print(result)
rgb(247,251,255)"><pre><span class="pl-c1">></span><span class="pl-c1">>></span> <span class="pl-k">import</span> <span class="pl-s1">sqlite3</span>
<span class="pl-c1">></span><span class="pl-c1">>></span> <span class="pl-k">import</span> <span class="pl-s1">sqlite_colorbrewer</span>

<span class="pl-c1">></span><span class="pl-c1">>></span> <span class="pl-s1">conn</span> <span class="pl-c1">=</span> <span class="pl-s1">sqlite3</span>.<span class="pl-c1">connect</span>(<span class="pl-s">':memory'</span>)
<span class="pl-c1">></span><span class="pl-c1">>></span> <span class="pl-s1">sqlite_colorbrewer</span>.<span class="pl-c1">register</span>(<span class="pl-s1">conn</span>)

<span class="pl-c1">></span><span class="pl-c1">>></span> <span class="pl-s1">cursor</span> <span class="pl-c1">=</span> <span class="pl-s1">conn</span>.<span class="pl-c1">execute</span>(<span class="pl-s">"SELECT colorbrewer('Blues', 9, 0);"</span>)
<span class="pl-c1">></span><span class="pl-c1">>></span> <span class="pl-s1">result</span> <span class="pl-c1">=</span> <span class="pl-en">next</span>(<span class="pl-s1">cursor</span>)
<span class="pl-c1">></span><span class="pl-c1">>></span> <span class="pl-en">print</span>(<span class="pl-s1">result</span>)
<span class="pl-en">rgb</span>(<span class="pl-c1">247</span>,<span class="pl-c1">251</span>,<span class="pl-c1">255</span>)</pre></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Development</h2><a id="user-content-development" class="anchor" aria-label="Permalink: Development" href="#development"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">To set up this plugin locally, first checkout the code. Then create a new virtual environment:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="cd sqlite-colorbrewer
python3 -mvenv venv
source venv/bin/activate"><pre class="notranslate"><code>cd sqlite-colorbrewer
python3 -mvenv venv
source venv/bin/activate
</code></pre></div>
<p dir="auto">Or if you are using <code>pipenv</code>:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="pipenv shell"><pre class="notranslate"><code>pipenv shell
</code></pre></div>
<p dir="auto">Now install the dependencies and test dependencies:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="pip install -e '.[test]'"><pre class="notranslate"><code>pip install -e '.[test]'
</code></pre></div>
<p dir="auto">To run the tests:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="pytest"><pre class="notranslate"><code>pytest
</code></pre></div>
<p dir="auto">To build <code>sqlite_colorbrewer/colorbrewer.py</code>:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="./json_to_python.py
black . # to format the resulting file"><pre class="notranslate"><code>./json_to_python.py
black . # to format the resulting file
</code></pre></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">ColorBrewer</h2><a id="user-content-colorbrewer" class="anchor" aria-label="Permalink: ColorBrewer" href="#colorbrewer"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Copyright (c) 2002 Cynthia Brewer, Mark Harrower, and The Pennsylvania State University.</p>
<p dir="auto">Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at</p>
<p dir="auto"><a href="http://www.apache.org/licenses/LICENSE-2.0" rel="nofollow">http://www.apache.org/licenses/LICENSE-2.0</a></p>
<p dir="auto">Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.</p>
<p dir="auto">See the <a href="http://www.personal.psu.edu/cab38/ColorBrewer/ColorBrewer_updates.html" rel="nofollow">ColorBrewer updates</a> for updates to copyright information.</p>
</article></div>