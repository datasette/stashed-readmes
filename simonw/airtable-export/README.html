<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">airtable-export</h1><a id="user-content-airtable-export" class="anchor" aria-label="Permalink: airtable-export" href="#airtable-export"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><a href="https://pypi.org/project/airtable-export/" rel="nofollow"><img src="https://img.shields.io/pypi/v/airtable-export.svg" alt="PyPI" style="max-width: 100%;" data-camo-src="https://camo.githubusercontent.com/f2798e847a4bea29ff82f8fa99309141a7232916cfd7d9a785afa5dd844beed5/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f6169727461626c652d6578706f72742e737667"></a>
<a href="https://github.com/simonw/airtable-export/releases"><img src="https://img.shields.io/github/v/release/simonw/airtable-export?include_prereleases&label=changelog" alt="Changelog" style="max-width: 100%;" data-camo-src="https://camo.githubusercontent.com/7262286038227e419aae5764d45a725588159e717c4e3899ffadb8afd394ab4d/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f762f72656c656173652f73696d6f6e772f6169727461626c652d6578706f72743f696e636c7564655f70726572656c6561736573266c6162656c3d6368616e67656c6f67"></a>
<a href="https://github.com/simonw/airtable-export/actions?query=workflow%3ATest"><img src="https://github.com/simonw/airtable-export/workflows/Test/badge.svg" alt="Tests" style="max-width: 100%;"></a>
<a href="https://github.com/simonw/airtable-export/blob/master/LICENSE"><img src="https://img.shields.io/badge/license-Apache%202.0-blue.svg" alt="License" style="max-width: 100%;" data-camo-src="https://camo.githubusercontent.com/c355f200ea90fddaa407b6eaab303663a669248ea3ca7b1fcf77dbe04ff5f48c/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6c6963656e73652d417061636865253230322e302d626c75652e737667"></a></p>
<p dir="auto">Export Airtable data to files on disk</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Installation</h2><a id="user-content-installation" class="anchor" aria-label="Permalink: Installation" href="#installation"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Install this tool using <code>pip</code>:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ pip install airtable-export"><pre class="notranslate"><code>$ pip install airtable-export
</code></pre></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Usage</h2><a id="user-content-usage" class="anchor" aria-label="Permalink: Usage" href="#usage"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">You will need to the following information:</p>
<ul dir="auto">
<li>Your Airtable base ID - this is a string starting with <code>app...</code></li>
<li>Your Airtable personal access token - this is a string starting with <code>pat...</code></li>
</ul>
<p dir="auto">If you just want to export a subset of your tables you also need to know the names of those tables.</p>
<p dir="auto">You can export all of your data to a folder called <code>export/</code> by running the following:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="airtable-export export base_id --key=key"><pre class="notranslate"><code>airtable-export export base_id --key=key
</code></pre></div>
<p dir="auto">This example would files for each of your tables, for example: <code>export/table1.yml</code> and <code>export/table2.yml</code>.</p>
<p dir="auto">Rather than passing the API key using the <code>--key</code> option you can set it as an environment variable called <code>AIRTABLE_KEY</code>.</p>
<p dir="auto">To export only specified tables, pass their names as additional arguments:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="airtable-export export base_id table1 table2 --key=key"><pre class="notranslate"><code>airtable-export export base_id table1 table2 --key=key
</code></pre></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Export options</h2><a id="user-content-export-options" class="anchor" aria-label="Permalink: Export options" href="#export-options"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">By default the tool exports your data as YAML.</p>
<p dir="auto">You can also export as JSON or as <a href="http://ndjson.org/" rel="nofollow">newline delimited JSON</a> using the <code>--json</code> or <code>--ndjson</code> options:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="airtable-export export base_id --key=key --ndjson"><pre class="notranslate"><code>airtable-export export base_id --key=key --ndjson
</code></pre></div>
<p dir="auto">You can pass multiple format options at once. This command will create a <code>.json</code>, <code>.yml</code> and <code>.ndjson</code> file for each exported table:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="airtable-export export base_id \
    --key=key --ndjson --yaml --json"><pre class="notranslate"><code>airtable-export export base_id \
    --key=key --ndjson --yaml --json
</code></pre></div>
<p dir="auto">If you import all tables, or if you add the <code>--schema</code> option, a JSON schema for the base will be written to <code>output-dir/_schema.json</code>.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">SQLite database export</h3><a id="user-content-sqlite-database-export" class="anchor" aria-label="Permalink: SQLite database export" href="#sqlite-database-export"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">You can export tables to a SQLite database file using the <code>--sqlite database.db</code> option:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="airtable-export export base_id \
    --key=key --sqlite database.db"><pre class="notranslate"><code>airtable-export export base_id \
    --key=key --sqlite database.db
</code></pre></div>
<p dir="auto">This can be combined with other format options. If you only specify <code>--sqlite</code> the export directory argument will be ignored.</p>
<p dir="auto">The SQLite database will have a table created for each table you export. Those tables will have a primary key column called <code>airtable_id</code>.</p>
<p dir="auto">If you run this command against an existing SQLite database records with matching primary keys will be over-written by new records from the export.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Request options</h2><a id="user-content-request-options" class="anchor" aria-label="Permalink: Request options" href="#request-options"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">By default the tool uses <a href="https://www.python-httpx.org" rel="nofollow">python-httpx</a>'s default configurations.</p>
<p dir="auto">You can override the <code>user-agent</code> using the <code>--user-agent</code> option:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="airtable-export export base_id table1 table2 --key=key --user-agent "Airtable Export Robot""><pre class="notranslate"><code>airtable-export export base_id table1 table2 --key=key --user-agent "Airtable Export Robot"
</code></pre></div>
<p dir="auto">You can override the <a href="https://www.python-httpx.org/advanced/#fine-tuning-the-configuration" rel="nofollow">timeout during a network read operation</a> using the <code>--http-read-timeout</code> option. If not set, this defaults to 5s.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="airtable-export export base_id table1 table2 --key=key --http-read-timeout 60"><pre class="notranslate"><code>airtable-export export base_id table1 table2 --key=key --http-read-timeout 60
</code></pre></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Running this using GitHub Actions</h2><a id="user-content-running-this-using-github-actions" class="anchor" aria-label="Permalink: Running this using GitHub Actions" href="#running-this-using-github-actions"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><a href="https://github.com/features/actions">GitHub Actions</a> is GitHub's workflow automation product. You can use it to run <code>airtable-export</code> in order to back up your Airtable data to a GitHub repository. Doing this gives you a visible commit history of changes you make to your Airtable data - like <a href="https://github.com/natbat/rockybeaches/commits/main/airtable">this one</a>.</p>
<p dir="auto">To run this for your own Airtable database you'll first need to add the following secrets to your GitHub repository:</p>
<dl>
  <dt>AIRTABLE_BASE_ID</dt>
  <dd>The base ID, a string beginning `app...`</dd>
  <dt>AIRTABLE_KEY</dt>
  <dd>Your Airtable API key</dd>
  <dt>AIRTABLE_TABLES</dt>
  <dd>A space separated list of the Airtable tables that you want to backup. If any of these contain spaces you will need to enclose them in single quotes, e.g. <samp>'My table with spaces in the name' OtherTableWithNoSpaces</samp></dd>
</dl>
<p dir="auto">Once you have set those secrets, add the following as a file called <code>.github/workflows/backup-airtable.yml</code>:</p>
<div class="highlight highlight-source-yaml notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="name: Backup Airtable

on:
  workflow_dispatch:
  schedule:
  - cron: '32 0 * * *'

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - name: Check out repo
      uses: actions/checkout@v2
    - name: Set up Python
      uses: actions/setup-python@v2
      with:
        python-version: 3.8
    - uses: actions/cache@v2
      name: Configure pip caching
      with:
        path: ~/.cache/pip
        key: ${{ runner.os }}-pip-
        restore-keys: |
          ${{ runner.os }}-pip-
    - name: Install airtable-export
      run: |
        pip install airtable-export
    - name: Backup Airtable to backups/
      env:
        AIRTABLE_BASE_ID: ${{ secrets.AIRTABLE_BASE_ID }}
        AIRTABLE_KEY: ${{ secrets.AIRTABLE_KEY }}
        AIRTABLE_TABLES: ${{ secrets.AIRTABLE_TABLES }}
      run: |-
        airtable-export backups $AIRTABLE_BASE_ID $AIRTABLE_TABLES -v
    - name: Commit and push if it changed
      run: |-
        git config user.name "Automated"
        git config user.email "actions@users.noreply.github.com"
        git add -A
        timestamp=$(date -u)
        git commit -m "Latest data: ${timestamp}" || exit 0
        git push"><pre><span class="pl-ent">name</span>: <span class="pl-s">Backup Airtable</span>

<span class="pl-ent">on</span>:
  <span class="pl-ent">workflow_dispatch</span>:
  <span class="pl-ent">schedule</span>:
  - <span class="pl-ent">cron</span>: <span class="pl-s"><span class="pl-pds">'</span>32 0 * * *<span class="pl-pds">'</span></span>

<span class="pl-ent">jobs</span>:
  <span class="pl-ent">build</span>:
    <span class="pl-ent">runs-on</span>: <span class="pl-s">ubuntu-latest</span>
    <span class="pl-ent">steps</span>:
    - <span class="pl-ent">name</span>: <span class="pl-s">Check out repo</span>
      <span class="pl-ent">uses</span>: <span class="pl-s">actions/checkout@v2</span>
    - <span class="pl-ent">name</span>: <span class="pl-s">Set up Python</span>
      <span class="pl-ent">uses</span>: <span class="pl-s">actions/setup-python@v2</span>
      <span class="pl-ent">with</span>:
        <span class="pl-ent">python-version</span>: <span class="pl-c1">3.8</span>
    - <span class="pl-ent">uses</span>: <span class="pl-s">actions/cache@v2</span>
      <span class="pl-ent">name</span>: <span class="pl-s">Configure pip caching</span>
      <span class="pl-ent">with</span>:
        <span class="pl-ent">path</span>: <span class="pl-s">~/.cache/pip</span>
        <span class="pl-ent">key</span>: <span class="pl-s">${{ runner.os }}-pip-</span>
        <span class="pl-ent">restore-keys</span>: <span class="pl-s">|</span>
<span class="pl-s">          ${{ runner.os }}-pip-</span>
<span class="pl-s"></span>    - <span class="pl-ent">name</span>: <span class="pl-s">Install airtable-export</span>
      <span class="pl-ent">run</span>: <span class="pl-s">|</span>
<span class="pl-s">        pip install airtable-export</span>
<span class="pl-s"></span>    - <span class="pl-ent">name</span>: <span class="pl-s">Backup Airtable to backups/</span>
      <span class="pl-ent">env</span>:
        <span class="pl-ent">AIRTABLE_BASE_ID</span>: <span class="pl-s">${{ secrets.AIRTABLE_BASE_ID }}</span>
        <span class="pl-ent">AIRTABLE_KEY</span>: <span class="pl-s">${{ secrets.AIRTABLE_KEY }}</span>
        <span class="pl-ent">AIRTABLE_TABLES</span>: <span class="pl-s">${{ secrets.AIRTABLE_TABLES }}</span>
      <span class="pl-ent">run</span>: <span class="pl-s">|-</span>
<span class="pl-s">        airtable-export backups $AIRTABLE_BASE_ID $AIRTABLE_TABLES -v</span>
<span class="pl-s"></span>    - <span class="pl-ent">name</span>: <span class="pl-s">Commit and push if it changed</span>
      <span class="pl-ent">run</span>: <span class="pl-s">|-</span>
<span class="pl-s">        git config user.name "Automated"</span>
<span class="pl-s">        git config user.email "actions@users.noreply.github.com"</span>
<span class="pl-s">        git add -A</span>
<span class="pl-s">        timestamp=$(date -u)</span>
<span class="pl-s">        git commit -m "Latest data: ${timestamp}" || exit 0</span>
<span class="pl-s">        git push</span></pre></div>
<p dir="auto">This will run once a day (at 32 minutes past midnight UTC) and will also run if you manually click the "Run workflow" button, see <a href="https://github.blog/changelog/2020-07-06-github-actions-manual-triggers-with-workflow_dispatch/" rel="nofollow">GitHub Actions: Manual triggers with workflow_dispatch</a>.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Development</h2><a id="user-content-development" class="anchor" aria-label="Permalink: Development" href="#development"><svg class="octicon octicon-link" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">To contribute to this tool, first checkout the code. Then create a new virtual environment:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="cd airtable-export
python -mvenv venv
source venv/bin/activate"><pre class="notranslate"><code>cd airtable-export
python -mvenv venv
source venv/bin/activate
</code></pre></div>
<p dir="auto">Or if you are using <code>pipenv</code>:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="pipenv shell"><pre class="notranslate"><code>pipenv shell
</code></pre></div>
<p dir="auto">Now install the dependencies and tests:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="pip install -e '.[test]'"><pre class="notranslate"><code>pip install -e '.[test]'
</code></pre></div>
<p dir="auto">To run the tests:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="pytest"><pre class="notranslate"><code>pytest
</code></pre></div>
</article></div>